<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Asynchronous JavaScript</title>
</head>
<body>
    <h1>Asynchronous JavaScript</h1>
    <script>
        //Asynch example 1
    //     const second = () => {
    //         setTimeout(() => {
    //             console.log('Async hey there');
    //         }, 2000);
    //     };

    //   const first = () => {
    //     console.log('Hey there');
    //     second();
    //     console.log('The end');
    //   }

    //   first();

        //Callback hell (Triangular shape)
        // function getRecipe() {
        //     setTimeout(() => {
        //         const recipeID = [523, 883, 432, 974];
        //         console.log(recipeID);

        //         setTimeout( id => {
        //             const recipe = { 
                    //     title: 'Fresh Tomato pasta',
                    //     publisher:'Jonas'
                    //     };
                    // console.log(`${id}: ${recipe.title}`);

        //             setTimeout( publisher => {
                        // const recipe2 = {
                        //     title: 'Italian Pizza',
                        //     publisher: publisher
                        // }
                        // console.log(recipe2);
        //             }, 1500, recipe.publisher);
        //         }, 1500, recipeID[2]);

        //     }, 1500);
        // }
        // getRecipe();


        // //PROMISE EXAMPLE
        // const getIDs = new Promise( (resolve, reject) => {
        //     setTimeout( () => {
        //         resolve([523, 883, 432, 974]);
        //     }, 1500);
        // });
        
        // const getRecipe = recID =>{
        //     return new Promise((resolve, rejet) => {
        //         setTimeout(ID => {
        //             const recipe = {
        //                 title: 'Fresh Tomato pasta',
        //                 publisher:'Jonas'
        //             };
        //             resolve(`${ID}: ${recipe.title}`);
        //         }, 1500, recID);
        //     });
        // };

        // const getRelated = publisher => {
        //     return new Promise((resolve, reject) => {
        //         setTimeout(pub => {
        //             const recipe2 = {
        //                     title: 'Italian Pizza',
        //                     publisher: pub
        //                 }
        //             resolve(`${recipe2.publisher}: ${recipe2.title}`);
        //         }, 1500, publisher);
        //     })
        // }
        // //without Asynch/Await
        // // getIDs
        // // .then( IDs => {
        // //     console.log(IDs);
        // //     return getRecipe(IDs[2]);
        // // })
        // // .then(recipe => {
        // //     console.log(recipe);
        // //     return getRelated('Jonas');
        // // })
        // // .then(recipe2 => {
        // //     console.log(recipe2);
        // // })
        // // .catch(error => {
        // //     console.log('Error!!');
        // // });


        // async function getRecipesAW() {
        //     //await stops the code from executing until the promis is fullfiled.
        //     const IDs = await getIDs;
        //     console.log(IDs);

        //     const recipe = await getRecipe(IDs[2]);
        //     console.log(recipe)
        //     const related = await getRelated('Connor Burgess');
        //     console.log(related);
        //     return recipe;
        // }
        // const rec = getRecipesAW()
        // .then(rec => {
        //     console.log(`${rec} is the best ever`);
        // });

        fetch('https://cors-anywhere.herokuapp.com/https://www.metaweather.com/api/location/44418/')
        .then(response => response.json())
        .then(data => console.log(data))
        .catch(err => console.log(err));

        //Fetch and promises
        // fetch("https://api-nba-v1.p.rapidapi.com/seasons/", {
	    //     "method": "GET",
	    //     "headers": {
		//         "x-rapidapi-host": "api-nba-v1.p.rapidapi.com",
		//         "x-rapidapi-key": "bec9166da9mshc65825fc4dddf78p19c1e6jsn30feec0b19e6"
	    //     }
        // })
        // .then(response => {
        //     console.log(response);
        //     return response.json();
        // }).then(data =>{
        //     console.log(data);
        //     console.log(data.api.seasons[0]);
        // })
        // .catch(err => {
	    //     console.log(err);
        // });

        // //fetch and asynch/await
        // async function getSeasonYear(num){
        //     try{
        //         const res = await fetch("https://api-nba-v1.p.rapidapi.com/seasons/", {
        //             "method": "GET",
        //             "headers": {
        //                 "x-rapidapi-host": "api-nba-v1.p.rapidapi.com",
        //                 "x-rapidapi-key": "bec9166da9mshc65825fc4dddf78p19c1e6jsn30feec0b19e6"
        //             }
        //             })
        //         const data = await res.json();
        //         return data.api.seasons[num]; 
        //     } catch(error) {
        //         alert(error);
        //     }
        // }


        // getSeasonYear(0)
        // .then(year => {
        //     console.log(year);
        // });
        // getSeasonYear(3)
        // .then(year => {
        //     console.log(year);
        // });



    </script>
</body>
</html>